<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Delete E-Book Chapter</title>
    <link href="../Cdn/vendor/bootstrap-5.3.3/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" />
    <link rel="stylesheet" href="../Cdn/css/admin.global.css" />
    <script src="../Cdn/vendor/jquery-3.7.1/jquery-3.7.1.min.js"></script>
    <script src="../Cdn/vendor/popper-2.11.8/popper.min.js"></script>
    <script src="../Cdn/vendor/bootstrap-5.3.3/js/bootstrap.min.js"></script>
    <script src="../Cdn/vendor/validatejs-0.13.1/validate.min.js"></script>
    <script src="../Cdn/js/script.js"></script>

    <script type="text/javascript">

        $(window).on('resize', function () {
            if ($(window).width() >= 768)
                $('.sidebar').removeClass('offcanvas offcanvas-start');
            else
                $('.sidebar').addClass('offcanvas offcanvas-start');
        });

        $(document).ready(function () {
            $(".header").load("header.html");
            $(".sidebar").load("sidebar.html");
            $(".footer").load("footer.html");

            let urlParams = new URLSearchParams(window.location.search);
            let bookId = urlParams.get('id');

            $(document).ready(function () {
                let urlParams = new URLSearchParams(window.location.search);
                let chapterId = urlParams.get('ebook_chapter_id');

                $.getJSON('../Cdn/js/data/ebooks.chapters.json', function (response) {
                    var book = response.data.find(function (item) {
                        return item.ebook_chapter_id == chapterId;
                    });
                    if (book) {
                        $('#chapter').val(book.chapter);
                        $('#content').val(book.content);
                    } else {
                        console.log("Book not found with ID: " + chapterId);
                    }
                });
            });
        });

        $(document).on("click", "#back", function () {
            const ebook_id = getParams('ebook_id')
            const title = getParams('title')
            window.location.href = "ebook.chapters.list.html?id=" + ebook_id + "&title=" + title;
        });

    </script>
</head>

<body>
    <!-- DYNAMIC MODAL -->
    <div class="modal fade" id="dynamicModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered" id="form-content">
            <div class="modal-content">
                <input type="hidden" name="csrf_token" id="csrf_token" value="" />
                <div class="modal-body d-flex flex-column justify-content-center align-items-center">
                    <i class="bi bi-trash3-fill text-danger" style="font-size: 10em !important;"></i>
                    <h1 style="font-weight: bold; font-size: 30px">
                        Delete E-Book
                    </h1>
                    <p style="font-size: 15px">
                        Are you sure you want to delete this e-book?
                    </p>
                    <div class="text-end">
                        <button type="button" class="btn border border-secondary-subtle btn-light"
                            data-bs-dismiss="modal">
                            Close
                        </button>
                        <button type="button" class="btn btn-delete btn-danger">Delete</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container-fluid p-0 overflow-hidden">
        <div class="row">
            <!-- SIDEBAR -->
            <div class="col-md-3 col-lg-2">
                <div class="col-md-3 col-lg-2 col-lg-2 sidebar position-fixed h-100"
                    style="background-color: #1c1c39 !important;" data-bs-backdrop="static" tabindex="-1" id="sidebar">
                </div>
            </div>
            <main class="col py-3 md-9 mx-2">
                <!-- HEADER -->
                <div class="header"></div>

                <!-- CONTENT -->
                <div class="content">
                    <div class="card">
                        <div class="card-body">
                            <div
                                class="d-flex justify-content-start mb-2 align-items-center border-bottom border-secondary-subtle pb-1">
                                <i class="bi bi-trash3-fill fs-2"></i>
                                <h5 class="ms-2 modal-title fw-bold">
                                    Delete E-Book Chapter
                                </h5>
                            </div>
                            <div class="response"></div>

                            <div class="d-flex flex-column form-group">
                                <label for="chapter" class="form-label fw-semibold">Chapter</label>
                                <input type="text" name="chapter" id="chapter" class="form-control" value=""
                                    autocomplete="off" disabled>
                            </div>
                            <div class="d-flex flex-column form-group mt-4">
                                <label for="content" class="form-label fw-semibold">Content</label>
                                <textarea name="content" id="content" class="form-control" value=""
                                    autocomplete="off" wrap=physical rows="5" disabled></textarea>
                            </div>
                            
                            <div class="d-flex gap-2 justify-content-end mt-3">
                                <button id="back" type="button" class="btn border border-secondary btn-light"
                                    data-bs-dismiss="modal">
                                    Back
                                </button>
                                <button type="button" class="btn btn-danger" data-bs-toggle='modal'
                                    data-bs-target='#dynamicModal'>
                                    Continue Deletion
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
        </div>

        <!-- FOOTER -->
        <div class="footer"></div>
        </main>
    </div>
    </div>
</body>

</html>
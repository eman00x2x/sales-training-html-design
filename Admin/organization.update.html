<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Update Organization Details</title>
  <link href="../Cdn/vendor/bootstrap-5.3.3/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" />
  <link rel="stylesheet" href="../Cdn/css/admin.global.css" />
  <script src="../Cdn/vendor/jquery-3.7.1/jquery-3.7.1.min.js"></script>
  <script src="../Cdn/vendor/popper-2.11.8/popper.min.js"></script>
  <script src="../Cdn/vendor/bootstrap-5.3.3/js/bootstrap.min.js"></script>
  <script src="../Cdn/vendor/validatejs-0.13.1/validate.min.js"></script>
  <script src="../Cdn/js/script.js"></script>

  <script type="text/javascript">
    $(document).ready(function () {
      $(".header").load("header.html");
      $(".sidebar").load("sidebar.html");
      $(".footer").load("footer.html");
    });

    $(document).on("change", "#logo", function (e) {
      var URL = window.URL || window.webkitURL;
      var file = e.target.files[0];

      const imageTag =
        "<h6>Uploaded Files</h6><div class='d-flex flex-row justify-content-start align-items-center rounded shadow-sm p-2 bg-white rounded border border-secondary-subtle'><img src='" +
        URL.createObjectURL(file) +
        "'class='border border-secondary-subtle p-2 rounded' name='org_logo' style='height: 100px'/><div class='d-flex flex-column'><span class='ms-4 fw-semibold'>" +
        e.target.files[0].name +
        "</span> <span class='ms-4 fw-normal'>" +
        formatFileSize(e.target.files[0].size) +
        "</span><div></div>";

      if (file) {
        $(".org_logo").html(imageTag);
      }
    });

    /**
     * Validator Documentation https://validatejs.org/#validators-length
     **/

    function validateInput(input) {
      let message = [];

      const data = input.reduce(function (obj, item) {
        obj[item.name] = item.value;
        return obj;
      }, {});

      const validator = validate(
        {
          logo: data.logo,
          name: data.name,
          description: data.description,
        },
        {
          logo: {
            type: "image/png,image/jpeg",
          },
          name: {
            type: "string",
            length: { minimum: 4 },
          },
          description: {
            type: "string",
            length: { maximum: 100 },
          },
        }
      );

      if (validator !== undefined) {
        for (key in validator) {
          message.push(validator[key]);
        }
        return message.join(", ");
      }

      return false;
    }
  </script>
</head>

<body>
  <div class="container-fluid">
    <div class="row flex-nowrap" style="height: 100vh">
      <!-- SIDEBAR -->
      <div class="sidebar col-md-3 col-lg-2 px-sm-2 px-0 bg-light"></div>
      <main class="col py-3">
        <!-- HEADER -->
        <div class="header"></div>

        <!-- CONTENT -->
        <div class="content">
          <!-- all content body should be here -->

          <div class="card">
            <div class="card-body">
              <div
                class="d-flex justify-content-start mb-2 align-items-center border-bottom border-secondary-subtle pb-1">
                <i class="bi bi-plus-square-fill fs-2"></i>
                <h5 class="ms-2 modal-title font-bold">
                 Update Organization Details
                </h5>
              </div>
              <div class="response"></div>

              <form id="form" action="" method="post">
                <input type="hidden" name="csrf_token" id="csrf_token" value="" />
                <div class="mb-3">
                  <label for="logo" class="form-label fw-semibold">Organization Logo</label>
                  <fieldset class="upload_dropzone text-center p-4 rounded">
                    <legend class="visually-hidden">Image uploader</legend>
                    <i class="bi bi-cloud-arrow-up-fill h1"></i>
                    <p class="small my-1">
                      Drag &amp; Drop background image(s) inside dashed
                      region<br /><i>or</i>
                    </p>
                    <input id="logo" name="logo" class="position-absolute invisible" type="file"
                      accept="image/jpeg, image/png, image/svg+xml" />
                    <label class="btn btn-upload mb-3 bg-primary text-white" for="logo">Choose file(s)</label>
                    <div class="upload_gallery d-flex flex-wrap justify-content-center gap-3 mb-0"></div>
                  </fieldset>
                  <div class="mt-3 org_logo"></div>
                </div>
                <div class="mb-3">
                  <label for="name" class="form-label fw-semibold">Organization Name</label>
                  <input type="text" class="form-control" id="name" name="name" />
                </div>
                <div class="mb-3">
                  <label for="description" class="form-label fw-semibold">Organization Description</label>
                  <textarea class="form-control" id="description" rows="5" name="description"></textarea>
                </div>
                <div class="text-end">
                  <button type="button" class="btn border border-secondary" data-bs-dismiss="modal">
                    Close
                  </button>
                  <button type="button" class="btn btn-save btn-success">
                    Submit
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>

        <!-- FOOTER -->
        <div class="footer"></div>
      </main>
    </div>
  </div>
</body>

</html>